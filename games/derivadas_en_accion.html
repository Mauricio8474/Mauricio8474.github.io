<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ1QWD1TCC"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Derivadas en Acci√≥n - C√°lculo Interactivo</title>
    <link rel="stylesheet" href="/assets/css/games/derivadas_en_accion.css">
</head>
<body>
    <!-- Header with game stats -->
    <header class="game-header">
        <div class="header-content">
            <div class="game-title">
                <h1>Derivadas en Acci√≥n</h1>
                <span class="beta-badge">Beta</span>
            </div>
            <div class="game-stats">
                <div class="stat-item">
                    <span class="stat-label">Nivel</span>
                    <span id="current-level" class="stat-value">1</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Puntos</span>
                    <span id="total-points" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Racha</span>
                    <span id="streak" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Energ√≠a</span>
                    <span id="energy" class="stat-value">100</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Welcome Screen -->
    <div id="welcome-screen" class="screen active">
        <div class="screen-content">
            <div class="welcome-hero">
                <h2>¬°Bienvenido a Derivadas en Acci√≥n!</h2>
                <p>Aprende y practica derivadas de manera interactiva y divertida</p>
            </div>
            
            <div class="game-modes">
                <div class="mode-card" data-mode="tutorial">
                    <div class="mode-icon">üìö</div>
                    <h3>Tutorial</h3>
                    <p>Aprende los conceptos b√°sicos paso a paso</p>
                    <div class="mode-badge recommended">Recomendado</div>
                </div>
                
                <div class="mode-card" data-mode="practice">
                    <div class="mode-icon">üéØ</div>
                    <h3>Pr√°ctica</h3>
                    <p>Resuelve problemas a tu ritmo</p>
                </div>
                
                <div class="mode-card" data-mode="challenge">
                    <div class="mode-icon">‚ö°</div>
                    <h3>Desaf√≠o</h3>
                    <p>Respuestas r√°pidas contra el tiempo</p>
                    <div class="mode-badge challenge">Desaf√≠o</div>
                </div>
                
                <div class="mode-card" data-mode="visual">
                    <div class="mode-icon">üìä</div>
                    <h3>Laboratorio Visual</h3>
                    <p>Explora derivadas gr√°ficamente</p>
                    <div class="mode-badge new">Nuevo</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tutorial Screen -->
    <div id="tutorial-screen" class="screen">
        <div class="screen-content">
            <div class="tutorial-header">
                <h2 id="tutorial-title">Conceptos B√°sicos</h2>
                <div class="tutorial-progress">
                    <div class="progress-bar">
                        <div id="tutorial-progress-bar" class="progress-fill"></div>
                    </div>
                    <span id="tutorial-step">1 / 6</span>
                </div>
            </div>
            
            <div class="tutorial-content">
                <div id="tutorial-explanation" class="tutorial-text">
                    <!-- Tutorial content will be populated by JavaScript -->
                </div>
                
                <div id="tutorial-demo" class="tutorial-demo">
                    <canvas id="tutorial-canvas" width="400" height="300"></canvas>
                </div>
            </div>
            
            <div class="tutorial-controls">
                <button id="prev-tutorial" class="btn btn-secondary">Anterior</button>
                <button id="tutorial-quiz" class="btn btn-accent">Quiz</button>
                <button id="next-tutorial" class="btn btn-primary">Siguiente</button>
            </div>
        </div>
    </div>

    <!-- Practice Screen -->
    <div id="practice-screen" class="screen">
        <div class="screen-content">
            <div class="practice-header">
                <div class="problem-info">
                    <h2>Modo Pr√°ctica</h2>
                    <div class="problem-details">
                        <span id="problem-type" class="problem-type">Regla de la Potencia</span>
                        <span id="problem-difficulty" class="difficulty-badge">Nivel 1</span>
                    </div>
                </div>
                
                <div class="practice-stats">
                    <div class="timer-container">
                        <span class="timer-icon">‚è±Ô∏è</span>
                        <span id="problem-timer" class="timer">30</span>
                    </div>
                    <div class="hints-container">
                        <span class="hints-icon">üí°</span>
                        <span>Pistas: <span id="hints-count">3</span></span>
                    </div>
                </div>
            </div>
            
            <div class="practice-content">
                <div class="problem-statement">
                    <h3>Encuentra la derivada de:</h3>
                    <div id="function-to-derive" class="function-display">f(x) = x¬≥</div>
                </div>
                
                <div class="answer-section">
                    <label for="derivative-input">f'(x) = </label>
                    <div class="input-container">
                        <input type="text" id="derivative-input" placeholder="Ingresa tu respuesta">
                        <div class="input-helpers">
                            <button class="helper-btn" data-symbol="x">x</button>
                            <button class="helper-btn" data-symbol="¬≤">¬≤</button>
                            <button class="helper-btn" data-symbol="¬≥">¬≥</button>
                            <button class="helper-btn" data-symbol="‚Å¥">‚Å¥</button>
                            <button class="helper-btn" data-symbol="^">^</button>
                            <button class="helper-btn" data-symbol="‚àö">‚àö</button>
                        </div>
                    </div>
                </div>
                
                <div class="practice-actions">
                    <button id="check-answer" class="btn btn-primary">Verificar Respuesta</button>
                    <button id="show-hint" class="btn btn-secondary">Mostrar Pista</button>
                    <button id="show-steps" class="btn btn-accent">Ver Pasos</button>
                    <button id="skip-problem" class="btn btn-outline">Saltar</button>
                </div>
                
                <div id="steps-container" class="steps-container">
                    <!-- Steps will be populated dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- Challenge Screen -->
    <div id="challenge-screen" class="screen">
        <div class="screen-content">
            <div class="challenge-header">
                <h2>Desaf√≠o R√°pido</h2>
                <div class="challenge-stats">
                    <div class="challenge-timer">
                        <span id="challenge-timer">02:00</span>
                    </div>
                    <div class="challenge-info">
                        <span>Problema <span id="current-problem-num">1</span></span>
                        <span>Resueltos: <span id="problems-count">0</span></span>
                    </div>
                </div>
            </div>
            
            <div class="challenge-content">
                <div class="rapid-problem">
                    <h3>Deriva r√°pidamente:</h3>
                    <div id="rapid-function" class="function-display">f(x) = 2x¬≤</div>
                </div>
                
                <div class="choices-container">
                    <div class="choice">A) 4x</div>
                    <div class="choice">B) 2x</div>
                    <div class="choice">C) x¬≤</div>
                    <div class="choice">D) 4x¬≤</div>
                </div>
                
                <div class="challenge-progress">
                    <div class="combo-section">
                        <span>Combo: <span id="combo-count">0</span></span>
                        <div class="combo-bar">
                            <div id="combo-fill" class="combo-fill"></div>
                        </div>
                    </div>
                    <div class="multiplier-section">
                        <span>Multiplicador: <span id="score-multiplier">1x</span></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Visual Lab Screen -->
    <div id="visual-screen" class="screen">
        <div class="screen-content">
            <div class="visual-header">
                <h2>Laboratorio Visual de Derivadas</h2>
                <p>Explora c√≥mo cambian las funciones y sus derivadas</p>
            </div>
            
            <div class="visual-content">
                <div class="graph-container">
                    <canvas id="main-graph" width="600" height="400"></canvas>
                    
                    <div class="graph-controls">
                        <div class="control-group">
                            <label for="function-select">Funci√≥n:</label>
                            <select id="function-select">
                                <option value="polynomial">f(x) = x¬≥ - 3x</option>
                                <option value="quadratic">f(x) = x¬≤</option>
                                <option value="sine">f(x) = sin(x)</option>
                                <option value="exponential">f(x) = e^(x/2)</option>
                                <option value="logarithmic">f(x) = ln(x)</option>
                            </select>
                        </div>
                        
                        <div class="control-group">
                            <label for="x-slider">Valor de x: <span id="x-value">0</span></label>
                            <input type="range" id="x-slider" min="-3" max="3" step="0.1" value="0">
                        </div>
                        
                        <div class="control-buttons">
                            <button id="play-animation" class="btn btn-primary">Animar</button>
                            <button id="reset-graph" class="btn btn-secondary">Reiniciar</button>
                        </div>
                    </div>
                </div>
                
                <div class="analysis-panel">
                    <h3>An√°lisis del Punto</h3>
                    <div class="point-info">
                        <div class="info-item">
                            <span class="info-label">Coordenadas:</span>
                            <span class="info-value">(<span id="point-x">0</span>, <span id="point-y">0</span>)</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Derivada:</span>
                            <span id="derivative-value" class="info-value">0</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Pendiente:</span>
                            <span id="slope-description" class="info-value">Horizontal</span>
                        </div>
                    </div>
                    
                    <div class="interpretation">
                        <h4>Interpretaci√≥n:</h4>
                        <p id="interpretation-text">En este punto, la funci√≥n tiene una pendiente horizontal.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Screen -->
    <div id="results-screen" class="screen">
        <div class="screen-content">
            <div class="results-header">
                <h2>¬°Sesi√≥n Completada!</h2>
                <div class="final-stats">
                    <div class="stat-card">
                        <span class="stat-number" id="final-score">0</span>
                        <span class="stat-label">Puntos Totales</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="problems-solved">0</span>
                        <span class="stat-label">Problemas Resueltos</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="accuracy-rate">0%</span>
                        <span class="stat-label">Precisi√≥n</span>
                    </div>
                </div>
            </div>
            
            <div class="achievements-section">
                <h3>Logros Desbloqueados</h3>
                <div id="achievements-grid" class="achievements-grid">
                    <!-- Achievements will be populated dynamically -->
                </div>
            </div>
            
            <div class="results-actions">
                <button id="continue-playing" class="btn btn-primary">Continuar Jugando</button>
                <button id="review-mistakes" class="btn btn-secondary">Revisar Errores</button>
                <button id="share-progress" class="btn btn-accent">Compartir Progreso</button>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="hint-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div id="hint-content">
                <!-- Hint content will be populated dynamically -->
            </div>
            <button class="btn btn-primary close-modal">Cerrar</button>
        </div>
    </div>

    <!-- Floating Action Button -->
    <div class="fab-menu">
        <button id="help-fab" class="fab-button">?</button>
        <div class="fab-options">
            <button class="fab-option" data-action="tutorial">üìö Tutorial</button>
            <button class="fab-option" data-action="formulas">üìù F√≥rmulas</button>
            <button class="fab-option" data-action="calculator">üßÆ Calculadora</button>
        </div>
    </div>

    <!-- Notifications Container -->
    <div id="notifications" class="notifications-container">
        <!-- Notifications will be added dynamically -->
    </div>

    <script src="script.js"></script>
</body>
</html>