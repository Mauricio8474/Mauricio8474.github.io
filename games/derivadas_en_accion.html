<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ1QWD1TCC"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Derivadas en Acci√≥n - C√°lculo Interactivo</title>
    <link rel="stylesheet" href="/assets/css/games/derivadas_en_accion.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1>üìà Derivadas en Acci√≥n</h1>
                <p>Aprende C√°lculo Diferencial Jugando</p>
            </div>
            <div class="stats-board">
                <div class="stat-item">
                    <span class="label">Nivel:</span>
                    <span id="current-level">1</span>
                </div>
                <div class="stat-item">
                    <span class="label">Puntos:</span>
                    <span id="total-points">0</span>
                </div>
                <div class="stat-item">
                    <span class="label">Racha:</span>
                    <span id="streak">0</span>
                </div>
                <div class="stat-item">
                    <span class="label">‚ö°</span>
                    <span id="energy">100</span>
                </div>
            </div>
        </header>

        <!-- Main Game Container -->
        <main class="game-container">
            <!-- Welcome Screen -->
            <div id="welcome-screen" class="screen active">
                <div class="welcome-content">
                    <h2>üöÄ ¬°Bienvenido a Derivadas en Acci√≥n!</h2>
                    <div class="game-modes">
                        <div class="mode-card" data-mode="tutorial">
                            <div class="mode-icon">üéì</div>
                            <h3>Tutorial Interactivo</h3>
                            <p>Aprende los conceptos b√°sicos de derivadas paso a paso</p>
                            <div class="difficulty">Principiante</div>
                        </div>
                        <div class="mode-card" data-mode="practice">
                            <div class="mode-icon">üèãÔ∏è</div>
                            <h3>Modo Pr√°ctica</h3>
                            <p>Resuelve problemas de derivadas con diferentes niveles</p>
                            <div class="difficulty">Intermedio</div>
                        </div>
                        <div class="mode-card" data-mode="challenge">
                            <div class="mode-icon">‚ö°</div>
                            <h3>Desaf√≠o Extremo</h3>
                            <p>Contra reloj: resuelve derivadas lo m√°s r√°pido posible</p>
                            <div class="difficulty">Avanzado</div>
                        </div>
                        <div class="mode-card" data-mode="visual">
                            <div class="mode-icon">üìä</div>
                            <h3>Laboratorio Visual</h3>
                            <p>Explora gr√°ficamente c√≥mo se comportan las derivadas</p>
                            <div class="difficulty">Exploraci√≥n</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tutorial Screen -->
            <div id="tutorial-screen" class="screen">
                <div class="tutorial-container">
                    <div class="tutorial-header">
                        <h2 id="tutorial-title">Concepto: ¬øQu√© es una derivada?</h2>
                        <div class="tutorial-progress">
                            <div id="tutorial-progress-bar" class="progress-bar"></div>
                            <span id="tutorial-step">1 / 6</span>
                        </div>
                    </div>
                    
                    <div class="tutorial-content">
                        <div id="tutorial-explanation" class="explanation-box">
                            <h3>üéØ Concepto Principal</h3>
                            <p>La derivada de una funci√≥n representa la <strong>tasa de cambio instant√°nea</strong> o la <strong>pendiente de la recta tangente</strong> en cualquier punto de la funci√≥n.</p>
                            
                            <div class="visual-example">
                                <canvas id="tutorial-canvas" width="400" height="300"></canvas>
                            </div>
                            
                            <div class="key-points">
                                <h4>üí° Puntos Clave:</h4>
                                <ul>
                                    <li>La derivada nos dice qu√© tan r√°pido cambia una funci√≥n</li>
                                    <li>Se denota como f'(x) o df/dx</li>
                                    <li>Geom√©tricamente es la pendiente de la recta tangente</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="interactive-demo" id="tutorial-demo">
                            <!-- Contenido interactivo espec√≠fico del tutorial -->
                        </div>
                    </div>
                    
                    <div class="tutorial-actions">
                        <button id="prev-tutorial" class="btn-secondary">‚Üê Anterior</button>
                        <button id="tutorial-quiz" class="btn-primary">Prueba R√°pida</button>
                        <button id="next-tutorial" class="btn-primary">Siguiente ‚Üí</button>
                    </div>
                </div>
            </div>

            <!-- Practice Screen -->
            <div id="practice-screen" class="screen">
                <div class="practice-container">
                    <div class="practice-header">
                        <div class="problem-info">
                            <h3 id="problem-type">Regla de la Potencia</h3>
                            <div class="difficulty-badge" id="problem-difficulty">Nivel 1</div>
                        </div>
                        <div class="practice-stats">
                            <div class="timer-circle">
                                <span id="problem-timer">30</span>
                            </div>
                            <div class="hints-left">
                                üí° <span id="hints-count">3</span>
                            </div>
                        </div>
                    </div>

                    <div class="problem-container">
                        <div class="function-display">
                            <h2>Encuentra la derivada de:</h2>
                            <div id="function-to-derive" class="math-expression">
                                f(x) = x¬≥ + 2x¬≤ - 5x + 3
                            </div>
                        </div>

                        <div class="solution-area">
                            <h3>Tu soluci√≥n:</h3>
                            <div id="solution-input" class="math-input">
                                <input type="text" id="derivative-input" placeholder="Escribe la derivada aqu√≠..." autocomplete="off">
                                <div class="input-helpers">
                                    <button class="helper-btn" data-symbol="x^">x^n</button>
                                    <button class="helper-btn" data-symbol="+">+</button>
                                    <button class="helper-btn" data-symbol="-">-</button>
                                    <button class="helper-btn" data-symbol="*">√ó</button>
                                    <button class="helper-btn" data-symbol="/">/</button>
                                    <button class="helper-btn" data-symbol="sqrt">‚àö</button>
                                    <button class="helper-btn" data-symbol="ln">ln</button>
                                    <button class="helper-btn" data-symbol="e^">e^x</button>
                                </div>
                            </div>
                        </div>

                        <div class="step-by-step" id="step-by-step">
                            <h4>üìù Pasos de resoluci√≥n:</h4>
                            <div id="steps-container">
                                <!-- Los pasos se generar√°n din√°micamente -->
                            </div>
                        </div>
                    </div>

                    <div class="practice-actions">
                        <button id="show-hint" class="btn-secondary">üí° Pista</button>
                        <button id="show-steps" class="btn-tertiary">üìù Ver Pasos</button>
                        <button id="check-answer" class="btn-primary">Verificar</button>
                        <button id="skip-problem" class="btn-warning">Saltar</button>
                    </div>
                </div>

                <!-- Hint Modal -->
                <div id="hint-modal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>üí° Pista</h3>
                            <button class="close-modal">&times;</button>
                        </div>
                        <div id="hint-content" class="hint-content">
                            <!-- Contenido de la pista -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Challenge Screen -->
            <div id="challenge-screen" class="screen">
                <div class="challenge-container">
                    <div class="challenge-header">
                        <h2>‚ö° Desaf√≠o Extremo</h2>
                        <div class="challenge-info">
                            <div class="time-left">
                                <span class="label">Tiempo:</span>
                                <span id="challenge-timer">02:00</span>
                            </div>
                            <div class="problems-solved">
                                <span class="label">Resueltos:</span>
                                <span id="problems-count">0</span>
                            </div>
                            <div class="multiplier">
                                <span class="label">Multiplicador:</span>
                                <span id="score-multiplier">1x</span>
                            </div>
                        </div>
                    </div>

                    <div class="rapid-fire-problem">
                        <div class="problem-number">Problema #<span id="current-problem-num">1</span></div>
                        <div id="rapid-function" class="math-expression-large">
                            f(x) = 3x¬≤ + 7x - 2
                        </div>
                        
                        <div class="multiple-choice" id="rapid-choices">
                            <div class="choice" data-choice="0">A) 6x + 7</div>
                            <div class="choice" data-choice="1">B) 3x + 7</div>
                            <div class="choice" data-choice="2">C) 6x¬≤ + 7x</div>
                            <div class="choice" data-choice="3">D) x¬≤ + x</div>
                        </div>
                    </div>

                    <div class="challenge-stats">
                        <div class="combo-meter">
                            <div class="combo-label">COMBO</div>
                            <div class="combo-bar">
                                <div id="combo-fill" class="combo-fill"></div>
                            </div>
                            <div id="combo-count">0</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Visual Laboratory Screen -->
            <div id="visual-screen" class="screen">
                <div class="visual-container">
                    <div class="visual-header">
                        <h2>üìä Laboratorio Visual de Derivadas</h2>
                        <div class="controls">
                            <button id="play-animation" class="btn-primary">‚ñ∂Ô∏è Reproducir</button>
                            <button id="reset-graph" class="btn-secondary">üîÑ Reiniciar</button>
                        </div>
                    </div>

                    <div class="visual-content">
                        <div class="graph-container">
                            <canvas id="main-graph" width="600" height="400"></canvas>
                            <div class="graph-controls">
                                <div class="control-group">
                                    <label>Funci√≥n:</label>
                                    <select id="function-select">
                                        <option value="polynomial">f(x) = x¬≥ - 3x</option>
                                        <option value="quadratic">f(x) = x¬≤</option>
                                        <option value="sine">f(x) = sin(x)</option>
                                        <option value="exponential">f(x) = eÀ£</option>
                                        <option value="logarithmic">f(x) = ln(x)</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label>Punto x:</label>
                                    <input type="range" id="x-slider" min="-3" max="3" step="0.1" value="1">
                                    <span id="x-value">1.0</span>
                                </div>
                            </div>
                        </div>

                        <div class="analysis-panel">
                            <h3>üìà An√°lisis en el punto</h3>
                            <div class="analysis-info">
                                <div class="info-item">
                                    <span class="label">x =</span>
                                    <span id="point-x" class="value">1.0</span>
                                </div>
                                <div class="info-item">
                                    <span class="label">f(x) =</span>
                                    <span id="point-y" class="value">-2.0</span>
                                </div>
                                <div class="info-item">
                                    <span class="label">f'(x) =</span>
                                    <span id="derivative-value" class="value">0.0</span>
                                </div>
                                <div class="info-item">
                                    <span class="label">Pendiente:</span>
                                    <span id="slope-description" class="value">Horizontal</span>
                                </div>
                            </div>

                            <div class="interpretation">
                                <h4>üí° Interpretaci√≥n:</h4>
                                <p id="interpretation-text">
                                    En este punto, la funci√≥n tiene una pendiente horizontal, 
                                    lo que indica un m√°ximo o m√≠nimo local.
                                </p>
                            </div>

                            <div class="derivative-rules">
                                <h4>üìö Reglas aplicadas:</h4>
                                <ul id="rules-applied">
                                    <li>Regla de la potencia: (x‚Åø)' = n¬∑x‚Åø‚Åª¬π</li>
                                    <li>Regla de la constante: (c)' = 0</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Screen -->
            <div id="results-screen" class="screen">
                <div class="results-container">
                    <div class="results-header">
                        <h2 id="results-title">üèÜ ¬°Sesi√≥n Completada!</h2>
                        <div class="final-stats">
                            <div class="stat-card">
                                <div class="stat-number" id="final-score">1250</div>
                                <div class="stat-label">Puntos Totales</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="problems-solved">15</div>
                                <div class="stat-label">Problemas Resueltos</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="accuracy-rate">87%</div>
                                <div class="stat-label">Precisi√≥n</div>
                            </div>
                        </div>
                    </div>

                    <div class="achievements-section">
                        <h3>üèÖ Logros Desbloqueados</h3>
                        <div id="achievements-grid" class="achievements-grid">
                            <!-- Logros se generar√°n din√°micamente -->
                        </div>
                    </div>

                    <div class="progress-section">
                        <h3>üìä Tu Progreso</h3>
                        <div class="skill-progress">
                            <div class="skill-item">
                                <span class="skill-name">Regla de la Potencia</span>
                                <div class="skill-bar">
                                    <div class="skill-fill" style="width: 85%"></div>
                                </div>
                                <span class="skill-level">85%</span>
                            </div>
                            <div class="skill-item">
                                <span class="skill-name">Regla del Producto</span>
                                <div class="skill-bar">
                                    <div class="skill-fill" style="width: 72%"></div>
                                </div>
                                <span class="skill-level">72%</span>
                            </div>
                            <div class="skill-item">
                                <span class="skill-name">Regla de la Cadena</span>
                                <div class="skill-bar">
                                    <div class="skill-fill" style="width: 60%"></div>
                                </div>
                                <span class="skill-level">60%</span>
                            </div>
                        </div>
                    </div>

                    <div class="results-actions">
                        <button id="continue-playing" class="btn-primary">Continuar Jugando</button>
                        <button id="review-mistakes" class="btn-secondary">Revisar Errores</button>
                        <button id="share-progress" class="btn-tertiary">Compartir Progreso</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Floating Action Button -->
        <div class="fab" id="help-fab">
            <span>?</span>
            <div class="fab-menu">
                <button class="fab-option" data-action="tutorial">üìö Tutorial</button>
                <button class="fab-option" data-action="formulas">üìù F√≥rmulas</button>
                <button class="fab-option" data-action="calculator">üßÆ Calculadora</button>
            </div>
        </div>

        <!-- Loading Screen -->
        <div id="loading" class="loading hidden">
            <div class="loading-spinner"></div>
            <p id="loading-text">Cargando problema...</p>
        </div>

        <!-- Notification System -->
        <div id="notifications" class="notifications-container">
            <!-- Notificaciones din√°micas -->
        </div>
    </div>

    <script src="/assets/js/games/derivadas_en_accion.js"></script>
</body>
</html>